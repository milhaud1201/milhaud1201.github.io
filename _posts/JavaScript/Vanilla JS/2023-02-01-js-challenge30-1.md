---
title: JavaScript30 - Day 1 Drum kit
date: 2023-02-01T23:00:00.272Z
categories: [JavaScript, Vanilla JS]
tags: [javascript, vanilla js]		# TAGëŠ” ë°˜ë“œì‹œ ì†Œë¬¸ì
---

# JavaScript30
ì „ë¶€í„° ìë°”ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë°°ìš°ê³  ì‹¶ì—ˆëŠ”ë° í”„ë ˆì„ì›Œí¬, ì»´íŒŒì¼ëŸ¬, ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì ìš©ë˜ì§€ ì•Šì€ **Vanilla JS**ë¡œ 30ê°œì˜ í”„ë¡œì íŠ¸ë¥¼ ë§Œë“œëŠ” Wes Bosì˜ ê°•ì˜ë¥¼ ë°œê²¬í•˜ì˜€ë‹¤. ë§ˆì¹¨ ì²« í”„ë¡œì íŠ¸ë¶€í„° ë‚´ê°€ ê´€ì‹¬ìˆì—ˆë˜ Audioë¥¼ í˜ì´ì§€ ë‚´ playerë¡œ ì ìš©í•´ë³¼ ìˆ˜ ìˆì–´ì„œ ì‹œì‘í•˜ê²Œ ë˜ì—ˆë‹¤.

**Wes Bos**ì˜ **JavaScript30 Challenge**ëŠ” [ìœ íŠœë¸Œ](https://www.youtube.com/watch?v=VuN8qwZoego&list=PLu8EoSxDXHP6CGK4YVJhL_VWetA865GOH&index=1)ë‚˜ [ê¹ƒí—™ ë ˆí¬ì§€í† ë¦¬](https://github.com/wesbos/JavaScript30)ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆë‹¤. ë‚˜ëŠ” í•´ë‹¹ ë ˆí¬ì§€í† ë¦¬ëŠ” forkí•´ì„œ ì½”ë“œë¥¼ ë°›ì•„ ì§„í–‰í–ˆë‹¤.

# Day 1 - JavaScript30 Drum kit
<iframe width="560" height="315" src="https://www.youtube.com/embed/VuN8qwZoego" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>


## START

```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>JS Drum Kit</title>
  <link rel="stylesheet" href="style.css">
  <link rel="icon" href="https://fav.farm/ğŸ”¥" />
</head>
<body>


  <div class="keys">
    <div data-key="65" class="key">
      <kbd>A</kbd>
      <span class="sound">clap</span>
    </div>
    <div data-key="83" class="key">
      <kbd>S</kbd>
      <span class="sound">hihat</span>
    </div>
    <div data-key="68" class="key">
      <kbd>D</kbd>
      <span class="sound">kick</span>
    </div>
    <div data-key="70" class="key">
      <kbd>F</kbd>
      <span class="sound">openhat</span>
    </div>
    <div data-key="71" class="key">
      <kbd>G</kbd>
      <span class="sound">boom</span>
    </div>
    <div data-key="72" class="key">
      <kbd>H</kbd>
      <span class="sound">ride</span>
    </div>
    <div data-key="74" class="key">
      <kbd>J</kbd>
      <span class="sound">snare</span>
    </div>
    <div data-key="75" class="key">
      <kbd>K</kbd>
      <span class="sound">tom</span>
    </div>
    <div data-key="76" class="key">
      <kbd>L</kbd>
      <span class="sound">tink</span>
    </div>
  </div>

  <audio data-key="65" src="sounds/clap.wav"></audio>
  <audio data-key="83" src="sounds/hihat.wav"></audio>
  <audio data-key="68" src="sounds/kick.wav"></audio>
  <audio data-key="70" src="sounds/openhat.wav"></audio>
  <audio data-key="71" src="sounds/boom.wav"></audio>
  <audio data-key="72" src="sounds/ride.wav"></audio>
  <audio data-key="74" src="sounds/snare.wav"></audio>
  <audio data-key="75" src="sounds/tom.wav"></audio>
  <audio data-key="76" src="sounds/tink.wav"></audio>

<script>

</script>


</body>
</html>
```

## PROCESS

#### 1. í‚¤ë³´ë“œë¥¼ ëˆ„ë¥´ë©´ í‚¤ë³´ë“œ ì´ë²¤íŠ¸ê°€ ë°œìƒí•œë‹¤.

```html
<script>
    window.addEventListener('keydown', function(e) {
        console.log(e)
    });
</script>
```

#### 2. í‚¤ë³´ë“œ ì´ë²¤íŠ¸ì˜ key codeë¥¼ ì¶œë ¥í•  ìˆ˜ë„ ìˆë‹¤.

```html
<script>
    window.addEventListener('keydown', function(e) {
        console.log(e.keyCode);
    });
</script>
```

|key| keycode|
|-----|-----|
|a|65|
|s|83|
|d|68|
|f|70|
|g|71|

#### 3. keycodeì™€ ê°™ì€ audioì˜ data-keyë¥¼ ë¶ˆëŸ¬ì˜¨ë‹¤.

```html
<script>
    window.addEventListener('keydown', function(e) {
        const audio = document.querySelector(`audio[data-key="${e.keyCode}"]`);
        console.log(audio);
    });
</script>
```

\<audio data-key="65" src="sounds/clap.wav"></audio>  
\<audio data-key="83" src="sounds/hihat.wav"></audio>  
\<audio data-key="68" src="sounds/kick.wav"></audio>  
\<audio data-key="70" src="sounds/openhat.wav"></audio>  
\<audio data-key="71" src="sounds/boom.wav"></audio>  

#### 4. audioì˜ play ê¸°ëŠ¥ì„ í™œì„±í™”í•œë‹¤.

í‚¤ë³´ë“œì˜ í‚¤ë¥¼ ì—°ì†í•´ì„œ ëˆ„ë¥´ë©´ ì‚¬ìš´ë“œì˜ ë°˜ì‘ ì†ë„ê°€ ëŠë¦¬ë‹¤. **openhat.wav** ì˜¤ë””ì˜¤ ì†ŒìŠ¤ëŠ” 1ì´ˆ ì •ë„ ë˜ëŠ”ë° ëë‚  ë•Œê¹Œì§€ ì¤‘ê°„ì— ì—°ì† ì¬ìƒì´ ì•ˆëœë‹¤. ë”°ë¼ì„œ, `audio.currentTime = 0`ìœ¼ë¡œ ì‹œì‘ ì§€ì ì„ ë˜ê°ëŠ”ë‹¤.

```html
<script>
    window.addEventListener('keydown', function(e) {
        const audio = document.querySelector(`audio[data-key="${e.keyCode}"]`);
        if (!audio) return;  // stop the funtion from running all together
        audio.currentTime = 0;  // rewind to the start
        audio.play();
    });
</script>
```

#### 5. ìŠ¤íƒ€ì¼ ì¡°ì‘ì„ ìœ„í•´ keycodeì™€ ë™ì¼í•œ key í´ë˜ìŠ¤ì˜ data-keyë¥¼ ë¶ˆëŸ¬ì˜¨ë‹¤.

```html
<script>
    window.addEventListener('keydown', function(e) {
        const audio = document.querySelector(`audio[data-key="${e.keyCode}"]`);
        const key = document.querySelector(`.key[data-key="${e.keyCode}"]`);
        if (!audio) return;  // stop the funtion from running all together
        audio.currentTime = 0;  // rewind to the start
        audio.play();
        console.log(key);
    });
</script>
```

#### 6. classListë¥¼ ì‚¬ìš©í•´ CSSì˜ .playingì„ ë¶ˆëŸ¬ì˜¤ê³  ì›¹ í˜ì´ì§€ì˜ ìŠ¤íƒ€ì¼ì„ ì¡°ì‘í•œë‹¤. 

keyë¥¼ ëˆ„ë¥´ë©´ .playingì˜ ìŠ¤íƒ€ì¼ì´ ì ìš©ë˜ì§€ë§Œ ì˜¤ë””ì˜¤ê°€ ëë‚˜ë„ ì—¬ì ¼íˆ ìŠ¤íƒ€ì¼ì´ ì ìš©ë˜ì–´ìˆë‹¤.

```css
.playing {
  transform: scale(1.1);
  border-color: #ffc600;
  box-shadow: 0 0 1rem #ffc600;
}
```

```html
<script>
    window.addEventListener('keydown', function(e) {
        const audio = document.querySelector(`audio[data-key="${e.keyCode}"]`);
        const key = document.querySelector(`.key[data-key="${e.keyCode}"]`);
        if (!audio) return;  // stop the funtion from running all together
        audio.currentTime = 0;  // rewind to the start
        audio.play();
        key.classList.add('playing');
    });
</script>
```

#### 7. keyë¥¼ ëˆ„ë¥´ë©´ transition eventë¥¼ ë§Œë“ ë‹¤.

```html
<script>
    ...
    function removeTransition(e) {
        console.log(e);
    };

    const keys = document.querySelectorAll('.key');
    keys.forEach(key => key.addEventListener('transitionend', removeTransition));
</script>
```

#### 8. ì „í™˜ ì¢…ë£Œì— ëŒ€í•œ ê¸°ëŠ¥ì„ ì„¸ë¶€ì ìœ¼ë¡œ ì§€ì •í•œë‹¤.

```html
<script>
    ...
    function removeTransition(e) {
        if (e.propertyName !== 'transform') return; // skip it if it's not a transform
        this.classList.remove('playing');
    };

    const keys = document.querySelectorAll('.key');
    keys.forEach(key => key.addEventListener('transitionend', removeTransition));
</script>
```


## FINISHED
ê¹ƒí—™ ë ˆí¬ì§€í† ë¦¬ì—ì„œëŠ” finished.htmlì´ ë¦¬í™í† ë§ ë˜ì–´ìˆë‹¤.
```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>JS Drum Kit</title>
  <link rel="stylesheet" href="style.css">
  <link rel="icon" href="https://fav.farm/âœ…" />
</head>
<body>


  <div class="keys">
    <div data-key="65" class="key">
      <kbd>A</kbd>
      <span class="sound">clap</span>
    </div>
    <div data-key="83" class="key">
      <kbd>S</kbd>
      <span class="sound">hihat</span>
    </div>
    <div data-key="68" class="key">
      <kbd>D</kbd>
      <span class="sound">kick</span>
    </div>
    <div data-key="70" class="key">
      <kbd>F</kbd>
      <span class="sound">openhat</span>
    </div>
    <div data-key="71" class="key">
      <kbd>G</kbd>
      <span class="sound">boom</span>
    </div>
    <div data-key="72" class="key">
      <kbd>H</kbd>
      <span class="sound">ride</span>
    </div>
    <div data-key="74" class="key">
      <kbd>J</kbd>
      <span class="sound">snare</span>
    </div>
    <div data-key="75" class="key">
      <kbd>K</kbd>
      <span class="sound">tom</span>
    </div>
    <div data-key="76" class="key">
      <kbd>L</kbd>
      <span class="sound">tink</span>
    </div>
  </div>

  <audio data-key="65" src="sounds/clap.wav"></audio>
  <audio data-key="83" src="sounds/hihat.wav"></audio>
  <audio data-key="68" src="sounds/kick.wav"></audio>
  <audio data-key="70" src="sounds/openhat.wav"></audio>
  <audio data-key="71" src="sounds/boom.wav"></audio>
  <audio data-key="72" src="sounds/ride.wav"></audio>
  <audio data-key="74" src="sounds/snare.wav"></audio>
  <audio data-key="75" src="sounds/tom.wav"></audio>
  <audio data-key="76" src="sounds/tink.wav"></audio>

<script>
  function removeTransition(e) {
    if (e.propertyName !== 'transform') return;
    e.target.classList.remove('playing');
  }

  function playSound(e) {
    const audio = document.querySelector(`audio[data-key="${e.keyCode}"]`);
    const key = document.querySelector(`div[data-key="${e.keyCode}"]`);
    if (!audio) return;

    key.classList.add('playing');
    audio.currentTime = 0;
    audio.play();
  }

  const keys = Array.from(document.querySelectorAll('.key'));
  keys.forEach(key => key.addEventListener('transitionend', removeTransition));
  window.addEventListener('keydown', playSound);
</script>


</body>
</html>
```

<br>


## Key Code
![DrumKit1](/assets/img/to/DrumKit1.png)

í‚¤ë³´ë“œì˜ íŠ¹ì • í‚¤ì™€ ì—°ê²°ëœ ìˆ«ìë¡œ `data-key`ë¥¼  ì§€ì •í•œë‹¤. í‚¤ë³´ë“œì˜ Aë¥¼ ëˆ„ë¥´ë©´ clap ì‚¬ìš´ë“œê°€ ì¬ìƒëœë‹¤.

`addEventListener`ì˜ `keydown`ì´ë¼ëŠ” `event`ëŠ” í‚¤ë³´ë“œì—ì„œ ì§€ì •ëœ í‚¤ ì¤‘ í•˜ë‚˜ë¥¼ ëˆŒë €ì„ ë•Œ í‚¤ë³´ë“œ ì´ë²¤íŠ¸ê°€ ë°œìƒí•œë‹¤. `audio.currentTime = 0`ì€ ì˜¤ë””ì˜¤ë¥¼ ë°˜ë³µ ì¬ìƒí•´ì¤€ë‹¤. `classList`ë¡œ DOM(ë¬¸ì„œ ê°ì²´ ëª¨ë¸)ì— `add`, `remove`, `toggle`ì„ ì‚¬ìš©í•˜ì—¬ ì›¹ í˜ì´ì§€ì˜ ìŠ¤íƒ€ì¼ì„ ì¡°ì‘í•œë‹¤.

<br>

## Transition End Event

`transitionend`ë¼ëŠ” `event`ë¡œ ì „í™˜ ì¢…ë£Œì— ëŒ€í•œ ì„¸ë¶€ì ì¸ ê¸°ëŠ¥ì„ ë§Œë“ ë‹¤.

í‚¤ë³´ë“œë¥¼ ëˆ„ë¥¼ ë•Œ drum kitì˜ ì˜¤ë””ì˜¤ ì‚¬ìš´ë“œê°€ ë“¤ë¦¬ëŠ”ê²Œ ì‹ ê¸°í–ˆë‹¤. ì»´í“¨í„° ë¹„ì „ ë¼ì´ë¸ŒëŸ¬ë¦¬ì¸ OpenCVì—ì„œ í‚¤ë³´ë“œ ì´ë²¤íŠ¸ì¸ `cv2.waitKey(delay=None)`ë‚˜ ë§ˆìš°ìŠ¤ ì½œë°±í•¨ìˆ˜ì¸ `cv2.setMouseCallback(windowName, mouse_fn, param=None)`ì™€ ë¹„ìŠ·í•´ë³´ì˜€ë‹¤. JSëŠ” ìµìˆ™í•˜ì§€ ì•Šì§€ë§Œ, ì²˜ìŒ Pythonì„ ë°°ì› ì„ ë•Œì²˜ëŸ¼ ì°¨ê·¼ì°¨ê·¼ í•´ë´ì•¼ì§€